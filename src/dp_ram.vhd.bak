LIBRARY ieee;
USE ieee.std_logic_1164.ALL;
use ieee.numeric_std.all;

ENTITY dp_ram IS

   PORT
   (
      rdclock : IN   std_logic;
      wrclock : IN   std_logic;
      data   : IN   std_logic_vector(15 downto 0);
      wraddress: IN  std_logic_vector(9 downto 0);
      rdaddress:  IN  std_logic_vector(9 downto 0);
      wren     : IN   std_logic;
      rden     : IN std_logic;
      q      : OUT  std_logic_vector(15 downto 0)
   );
END dp_ram;

ARCHITECTURE rtl OF dp_ram IS
  type RAM is array (0 to 1023) of std_logic_vector(15 downto 0);
  signal ram_block : RAM;

BEGIN
   PROCESS (wrclock)
   BEGIN
      IF (wrclock'event AND wrclock = '1') THEN
         IF (wren = '1') THEN
            ram_block(to_integer(unsigned(wraddress))) <= data;
         END IF;
      END IF;
   END PROCESS;

   PROCESS (rdclock)
   BEGIN
      IF (rdclock'event AND rdclock = '1') THEN
        IF (rden = '1') THEN
          q <= ram_block(to_integer(unsigned(rdaddress)));
        END IF;
      END IF;
   END PROCESS;

END rtl;
